
## 2024-03-20: ID System Consolidation

### Status
PROPOSED

### Context
Current ID system has multiple redundant identifiers:
- TypeId(usize)
- NodeId(usize)
- TraitId(usize)
- GraphNodeId (composite)
  
This leads to:
- Conversion boilerplate
- Type confusion
- Serialization complexity

### Decision
Adopt a tiered ID system:
1. **GraphNodeId** becomes the primary external identifier:
   ```rust
   pub struct GraphNodeId {
       pub type_prefix: NodeType, // Enum variant
       pub unique_id: u64,        // Global counter
   }
   ```
2. Internal specialized IDs (TypeId/TraitId) remain as *transparent wrappers*:
   ```rust
   #[repr(transparent)]
   pub struct TypeId(pub u64);
   ```
3. Deprecation path:
   - Phase 1: Add `From<T>` impls for GraphNodeId
   - Phase 2: Mark old IDs as `#[deprecated]`
   - Phase 3: Remove in v0.4.0

### Consequences
- ‚úÖ Clear type boundaries for static analysis
- üõ†Ô∏è Temporary increase in conversion code
- üì¶ Smaller serialized payloads (u64 vs composite)
